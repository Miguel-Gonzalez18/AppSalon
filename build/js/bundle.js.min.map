{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","consultarDB","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","desabilitarFechaAnterior","horaCita","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","url","resultado","fetch","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicios","agregarServicios","firstElementChild","nextElementSibling","style","visibility","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","headingCitas","innerHTML","servicioCita","headingServicios","cantida","contenedorServicio","textoServicio","totalServicios","split","trim","cantidadPagar","filter","servicioObj","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaAhora","fechaDesabilitar","getFullYear","getMonth","getDate","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\nconst cita = {\n    nombre: '',\n    fecha: '',\n    hora: '20:20',\n    servicios: []\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n    iniciarApp();\n});\nfunction iniciarApp(){\n    consultarDB();\n    mostrarSeccion();\n    cambiarSeccion();\n\n    //paginacion siguiente y anterior\n    paginaSiguiente();\n    paginaAnterior();\n\n    //Comprueba la pagina actual para mostrar o ocultar el boton\n    botonesPaginador();\n\n    //Muestra el resumen dela cita o mensaje de error en caso de no pasar la validacion\n    mostrarResumen();\n\n    nombreCita();\n    fechaCita();\n    desabilitarFechaAnterior();\n    horaCita();\n}\nfunction mostrarSeccion(){\n    const seccionAnterior = document.querySelector('.mostrar-seccion');\n    if(seccionAnterior){\n        seccionAnterior.classList.remove('mostrar-seccion');\n    }\n\n    const seccionActual = document.querySelector(`#paso-${pagina}`);\n    seccionActual.classList.add('mostrar-seccion');\n\n    const tabAnterior = document.querySelector('.tabs .actual');\n    if(tabAnterior){\n        tabAnterior.classList.remove('actual');\n    }\n\n    //Resalta el tab actual\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\n    tab.classList.add('actual');\n\n    //llamara la funcion de mostrar la seccion \n}\nfunction cambiarSeccion(){\n    const enlaces = document.querySelectorAll('.tabs button');\n    enlaces.forEach(enlace =>{\n        enlace.addEventListener('click', e =>{\n            e.preventDefault();\n            pagina = parseInt(e.target.dataset.paso);\n\n            mostrarSeccion();\n            botonesPaginador();\n        });\n    });\n}\nasync function consultarDB(){\n    try {\n        const url = \"http://localhost/AppSalon_inicio/servicios.php\";\n        const resultado = await fetch(url);\n        const db = await resultado.json();\n        db.forEach(servicio => {\n            const {id, nombre, precio} = servicio;\n\n            const nombreServicio = document.createElement('P');\n            nombreServicio.textContent = nombre;\n            nombreServicio.classList.add('nombre-servicio');\n\n            //general el precio del servicio\n            const precioServicio = document.createElement('p');\n            precioServicio.textContent = `$${precio}`;\n            precioServicio.classList.add('precio-servicio');\n            //Generar el contenedor servicio\n            const servicioDiv = document.createElement('DIV');\n            servicioDiv.classList.add('servicios');\n            servicioDiv.dataset.idServicio = id;\n\n            //Seeccion de un div para una cita\n           servicioDiv.onclick = seleccionarServicio;\n\n            servicioDiv.appendChild(nombreServicio);\n            servicioDiv.appendChild(precioServicio);\n            document.querySelector('#servicios').appendChild(servicioDiv); \n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nfunction seleccionarServicio(e){\n    let elemento;\n    if(e.target.tagName === 'P'){\n        elemento = e.target.parentElement;\n    }else{\n        elemento = e.target;\n    }\n\n    if(elemento.classList.contains('seleccionado')){\n        elemento.classList.remove('seleccionado');\n        const id = parseInt(elemento.dataset.idServicio);\n        eliminarServicios(id);\n    }\n    else{\n        elemento.classList.add('seleccionado');\n        const servicioObj = {\n            id: parseInt(elemento.dataset.idServicio),\n            nombre: elemento.firstElementChild.textContent,\n            precio: elemento.firstElementChild.nextElementSibling.textContent\n\n        }\n        agregarServicios(servicioObj);\n    }\n}\nfunction paginaSiguiente(){\n    const paginaSiguiente = document.querySelector('#siguiente');\n    paginaSiguiente.addEventListener('click', ()=>{\n        pagina++;\n        botonesPaginador();\n    });\n}\nfunction paginaAnterior(){\n    const paginaAnterior = document.querySelector('#anterior');\n    paginaAnterior.addEventListener('click', ()=>{\n        pagina--;\n        botonesPaginador();\n    });\n}\nfunction botonesPaginador(){\n    const paginaSiguiente = document.querySelector('#siguiente');\n    const paginaAnterior = document.querySelector('#anterior');\n    if(pagina === 1){\n        paginaAnterior.style.visibility = 'hidden';\n    }\n    else{\n        paginaAnterior.style.visibility = 'visible';\n    }\n    if(pagina === 3){\n        paginaSiguiente.style.visibility = 'hidden';\n        mostrarResumen();\n    }\n    else{\n        paginaSiguiente.style.visibility = 'visible';\n    }\n    mostrarSeccion();\n}\nfunction mostrarResumen(){\n    const { nombre, fecha, hora, servicios } = cita;\n    const resumenDiv = document.querySelector('.contenido-resumen');\n\n    while(resumenDiv.firstChild){\n        resumenDiv.removeChild(resumenDiv.firstChild);\n    }\n\n    if(Object.values(cita).includes('')){\n        const noServicios = document.createElement('P');\n        noServicios.textContent = \"Faltan datos de servicios como nombre, hora o fecha\";\n        noServicios.classList.add('invalidar-cita');\n        resumenDiv.appendChild(noServicios);\n\n        return;\n    }\n    const headingCitas = document.createElement('H3');\n    headingCitas.textContent = \"Resumen de citas\";\n\n    const nombreCita = document.createElement('P');\n    nombreCita.innerHTML = `<span>Nombre: </span>${nombre}`;\n\n    const fechaCita = document.createElement('P');\n    fechaCita.innerHTML = `<span>Fecha: </span>${fecha}`;\n\n    const horaCita = document.createElement('P');\n    horaCita.innerHTML = `<span>Hora: </span>${hora}`;\n\n    //iterar sobre los servicios\n    const servicioCita = document.createElement('DIV');\n    servicioCita.classList.add('resumen-servicios');\n\n    const headingServicios = document.createElement('H3');\n    headingServicios.textContent = \"Resumen de servicios\";\n    servicioCita.appendChild(headingServicios);\n    let cantida = 0;\n\n    servicios.forEach(servicio => {\n        const {nombre, precio} = servicio\n        const contenedorServicio = document.createElement('DIV');\n        contenedorServicio.classList.add('contenedor-servicio');\n\n        const textoServicio = document.createElement('P');\n        textoServicio.textContent = nombre;\n\n        const precioServicio = document.createElement('P');\n        precioServicio.textContent = precio;\n        precioServicio.classList.add('precio');\n        const totalServicios = precio.split('$');\n        cantida += parseInt(totalServicios[1].trim());\n\n        contenedorServicio.appendChild(textoServicio);\n        contenedorServicio.appendChild(precioServicio);\n        servicioCita.appendChild(contenedorServicio);\n    });\n    resumenDiv.appendChild(headingCitas)\n    resumenDiv.appendChild(nombreCita);\n    resumenDiv.appendChild(fechaCita);\n    resumenDiv.appendChild(horaCita);\n\n    resumenDiv.appendChild(servicioCita);\n\n    const cantidadPagar = document.createElement('P');\n    cantidadPagar.classList.add('total');\n    cantidadPagar.innerHTML = `<span>La cantidad a pagar es de: </span>$${cantida}`;\n    resumenDiv.appendChild(cantidadPagar);\n}\nfunction eliminarServicios(id){\n    const {servicios} = cita;\n    cita.servicios = servicios.filter(servicios => servicios.id !== id);\n    console.log(cita);\n}\nfunction agregarServicios(servicioObj){\n    const {servicios} = cita;\n    cita.servicios = [...servicios, servicioObj];\n    console.log(cita);\n}\nfunction nombreCita(){\n    const nombreInput = document.querySelector('#nombre');\n    nombreInput.addEventListener('input', e =>{\n        const nombreTexto = e.target.value.trim();\n        if(nombreTexto==='' || nombreTexto.length < 3){\n            mostrarAlerta('nombre no valido!', 'error');\n        }\n        else{\n            const alerta = document.querySelector('.alerta');\n            if(alerta){\n                alerta.remove();\n            }\n            cita.nombre = nombreTexto;\n        }\n    });\n}\nfunction mostrarAlerta(mensaje, tipo){\n    const alertaPrevia = document.querySelector('.alerta');\n    if(alertaPrevia)\n    {\n        return;\n    }\n    const alerta = document.createElement('DIV');\n    alerta.textContent = mensaje;\n    alerta.classList.add('alerta');\n\n    if(tipo === 'error');\n    alerta.classList.add('error');\n\n    const formulario = document.querySelector('.formulario');\n    formulario.appendChild(alerta);\n\n    setTimeout(()=>{\n        alerta.remove();\n    }, 3000);\n}\nfunction fechaCita(){\n    const fechaInput = document.querySelector('#fecha');\n    fechaInput.addEventListener('input', e =>{\n        const dia = new Date(e.target.value).getUTCDay();\n        if([0, 6].includes(dia)){\n            e.preventDefault();\n            fechaInput.value = '';\n            mostrarAlerta('Los fines de semana no ofrecemos servicios, selecciona otro dia', 'error');\n        }\n        else{\n            cita.fecha = fechaInput.value;\n            console.log(cita);\n        }\n    });\n}\nfunction desabilitarFechaAnterior(){\n    const inputFecha = document.querySelector('#fecha');\n    const fechaAhora = new Date();\n    const year = fechaAhora.getFullYear();\n    const mes = fechaAhora.getMonth() + 1;\n    const dia = fechaAhora.getDate();\n\n    const fechaDesabilitar = `${year}-${mes}-${dia}`;\n    inputFecha.min = fechaDesabilitar;\n}\nfunction horaCita(){\n    const inputHora = document.querySelector('#hora');\n    inputHora.addEventListener('input', e =>{\n        const horaCita = e.target.value;\n        const hora = horaCita.split(':')\n        if(hora[0] < 10 ||  hora[0] > 18){\n            mostrarAlerta('A esa hora no estamos laborando!', 'error');\n            setTimeout(()=>{\n                inputHora.value = '';\n            },3000);\n        }\n        else{\n            cita.hora = horaCita;\n        }\n    });\n}"]}